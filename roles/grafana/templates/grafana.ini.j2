# Grafana configuration file
# Generated by Ansible on {{ ansible_date_time.iso8601 }}

[default]
# instance_name = ${HOSTNAME}

[paths]
data = /var/lib/grafana
logs = /var/log/grafana
plugins = /var/lib/grafana/plugins
provisioning = /etc/grafana/provisioning

[server]
protocol = http
http_addr = 0.0.0.0
http_port = 3000
domain = {{ grafana_domain }}
root_url = %(protocol)s://%(domain)s:%(http_port)s/

[database]
type = {{ grafana_database_type }}
path = {{ grafana_database_path }}

[session]
provider = file
provider_config = sessions

[dataproxy]
logging = false

[analytics]
reporting_enabled = {{ grafana_analytics_reporting_enabled | lower }}
check_for_updates = {{ grafana_check_for_updates | lower }}

[security]
admin_user = {{ grafana_admin_user }}
admin_password = {{ grafana_admin_password }}
secret_key = {{ grafana_secret_key }}
login_remember_days = 7
cookie_username = grafana_user
cookie_remember_name = grafana_remember

[snapshots]
external_enabled = true
external_snapshot_url = https://snapshots-origin.raintank.io
external_snapshot_name = Publish to snapshot.raintank.io

[dashboards]
versions_to_keep = 20

[users]
allow_sign_up = {{ grafana_allow_sign_up | lower }}
allow_org_create = {{ grafana_allow_org_create | lower }}
auto_assign_org = {{ grafana_auto_assign_org | lower }}
auto_assign_org_role = {{ grafana_auto_assign_org_role }}

[auth.anonymous]
enabled = false

{% if grafana_smtp_enabled %}
[smtp]
enabled = true
host = {{ grafana_smtp_host }}
user = {{ grafana_smtp_user }}
password = {{ grafana_smtp_password }}
from_address = {{ grafana_smtp_from_address }}
from_name = Grafana
{% endif %}

[log]
mode = console file
level = info

[log.console]
level = info
format = console

[log.file]
level = info
format = text
log_rotate = true
max_lines = 1000000
max_size_shift = 28
daily_rotate = true
max_days = 7

[alerting]
enabled = true
execute_alerts = true

[explore]
enabled = true

[help]
enabled = true

[profile]
enabled = true

[feature_toggles]
enable = 

[panels]
disable_sanitize_html = false

[plugins]
enable_alpha = false