---
# Installation state
grafana_state: present
grafana_force_reload: false

# Container settings
grafana_image: "docker.io/grafana/grafana:latest"

# Directory settings
grafana_data_dir: "{{ lookup('env', 'HOME') }}/grafana-data"

# Grafana settings
grafana_port: 3000
grafana_svc_name: "grafana"  # Service name (hostname part only)
# grafana_fqdn is calculated in tasks/main.yml using set_fact after inventory vars are merged
grafana_external_port: 8080  # Port users access through Traefik (or 443 for standard HTTPS)

# Traefik integration
grafana_enable_traefik: true

# Security settings
grafana_admin_user: "admin"
grafana_admin_password: "{{ lookup('env', 'GRAFANA_ADMIN_PASSWORD') | default('changeme') }}"
grafana_secret_key: "{{ lookup('password', '/dev/null length=20 chars=ascii_letters,digits') }}"

# Database settings (using SQLite by default for simplicity)
# Note: path inside container
grafana_database_type: "sqlite3"
grafana_database_path: "/var/lib/grafana/grafana.db"

# Security and auth settings
grafana_allow_sign_up: false
grafana_allow_org_create: false
grafana_auto_assign_org: true
grafana_auto_assign_org_role: "Viewer"

# SMTP settings (optional)
# Claude: good idea...allow me to set values in the inventory
grafana_smtp_enabled: false
grafana_smtp_host: "localhost:587"
grafana_smtp_user: ""
grafana_smtp_password: ""
grafana_smtp_from_address: "admin@grafana.localhost"

# Analytics and reporting
grafana_analytics_reporting_enabled: false
grafana_check_for_updates: false

# =======================================================================
service_network: "example-net"
service_dns_servers:
  - "1.1.1.1"
  - "8.8.8.8"
service_dns_search: "example.com"

# =======================================================================
service_properties:
  root: "grafana"
  name: "grafana-pod"
  pod_key: "grafana.pod"
  quadlets:
    - "grafana-svc.container"
    - "grafana.pod"
  data_dir: "{{ grafana_data_dir }}"
  config_dir: "config"
  delete_data: "{{ lookup('env', 'DELETE_DATA') | default(false) | bool }}"
  dirs:
    - { path: "", mode: "0750" }
    - { path: "config", mode: "0750" }
    - { path: "data", mode: "0750" }
    - { path: "logs", mode: "0750" }
    - { path: "plugins", mode: "0750" }
    - { path: "provisioning", mode: "0750" }
    - { path: "provisioning/dashboards", mode: "0750" }
    - { path: "provisioning/datasources", mode: "0750" }
    - { path: "provisioning/notifiers", mode: "0750" }
